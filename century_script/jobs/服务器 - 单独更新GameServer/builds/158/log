Started by user [8mha:////4NL15lwhNok46o8LpNIYOqAIaurwr6Vm2yW5YSW4R5+wAAAAlh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyWEgYu/dLi1CL9ovz8EgDKVWzSvwAAAA==[0mroot
Running as SYSTEM
[EnvInject] - Loading node environment variables.
Building in workspace /var/jenkins_home/workspace/æœåŠ¡å™¨ - å•ç‹¬æ›´æ–°GameServer
[8mha:////4FCWxX96Ve0nWD8+g0O/GDeq6HRBLD9+zT0KuA/xsUsgAAAAqx+LCAAAAAAAAP9b85aBtbiIQSujNKU4P0+vIKc0PTOvWC8xrzgzOT8nv0gvMbkkEyjhCKb88ktSdwVsu2efuqidiYHRh4EDIu2ZUsIg5JOVWJaon5OYl64fXFKUmZduXVHEIAU1ODk/rzg/J1XPGUKDDGKAAEYmBoaKghIGlUSzVHOTZMtkXQtLMxNdk1QzS92kVMMUXXMzI8NUYwOzpCQzQwAFr7RWrwAAAA==[0m[SSH] executing pre build script:
server_name="pkcp"
variable_args="disable_rtp_limit"

#!/bin/bash
source /root/jenkins/jk_func.sh

file_lock
echo ${server_name}
check_env_args ${server_name}
echo ${variable_args}

yaml $conf_file "['$server_name']"
branch_name=$(yaml $conf_file "['$server_name']['game']")
server_port=$(yaml $conf_file "['$server_name']['port']")
echo ${branch_name}

# run
cd /mnt/slots/cc-server
git cd $branch_name
check_last_cmd $branch_name
git pull
check_last_cmd pull
cd /mnt/slots/cc-slots-land/batch
set_env_args ${variable_args}
./compile.sh $server_name && ./build_image.sh $server_name && ./run_image.sh $server_name $server_port
clear_env_args

file_unlock




è„šæœ¬å¯æ‰§è¡Œ
pkcp
disable_rtp_limit
{'bandit': 'develop', 'game': 'feature/spin_max_bonus', 'cc-conf': 'deploy-cc-conf', 'desc': 'pkcp', 'rpc_port': 10009, 'bandit-conf': 'deploy-bandit-conf', 'port': 9999}
feature/spin_max_bonus
Already on 'feature/spin_max_bonus'
remote: Enumerating objects: 173, done.[K
remote: Counting objects:   0% (1/166)[Kremote: Counting objects:   1% (2/166)[Kremote: Counting objects:   2% (4/166)[Kremote: Counting objects:   3% (5/166)[Kremote: Counting objects:   4% (7/166)[Kremote: Counting objects:   5% (9/166)[Kremote: Counting objects:   6% (10/166)[Kremote: Counting objects:   7% (12/166)[Kremote: Counting objects:   8% (14/166)[Kremote: Counting objects:   9% (15/166)[Kremote: Counting objects:  10% (17/166)[Kremote: Counting objects:  11% (19/166)[Kremote: Counting objects:  12% (20/166)[Kremote: Counting objects:  13% (22/166)[Kremote: Counting objects:  14% (24/166)[Kremote: Counting objects:  15% (25/166)[Kremote: Counting objects:  16% (27/166)[Kremote: Counting objects:  17% (29/166)[Kremote: Counting objects:  18% (30/166)[Kremote: Counting objects:  19% (32/166)[Kremote: Counting objects:  20% (34/166)[Kremote: Counting objects:  21% (35/166)[Kremote: Counting objects:  22% (37/166)[Kremote: Counting objects:  23% (39/166)[Kremote: Counting objects:  24% (40/166)[Kremote: Counting objects:  25% (42/166)[Kremote: Counting objects:  26% (44/166)[Kremote: Counting objects:  27% (45/166)[Kremote: Counting objects:  28% (47/166)[Kremote: Counting objects:  29% (49/166)[Kremote: Counting objects:  30% (50/166)[Kremote: Counting objects:  31% (52/166)[Kremote: Counting objects:  32% (54/166)[Kremote: Counting objects:  33% (55/166)[Kremote: Counting objects:  34% (57/166)[Kremote: Counting objects:  35% (59/166)[Kremote: Counting objects:  36% (60/166)[Kremote: Counting objects:  37% (62/166)[Kremote: Counting objects:  38% (64/166)[Kremote: Counting objects:  39% (65/166)[Kremote: Counting objects:  40% (67/166)[Kremote: Counting objects:  41% (69/166)[Kremote: Counting objects:  42% (70/166)[Kremote: Counting objects:  43% (72/166)[Kremote: Counting objects:  44% (74/166)[Kremote: Counting objects:  45% (75/166)[Kremote: Counting objects:  46% (77/166)[Kremote: Counting objects:  47% (79/166)[Kremote: Counting objects:  48% (80/166)[Kremote: Counting objects:  49% (82/166)[Kremote: Counting objects:  50% (83/166)[Kremote: Counting objects:  51% (85/166)[Kremote: Counting objects:  52% (87/166)[Kremote: Counting objects:  53% (88/166)[Kremote: Counting objects:  54% (90/166)[Kremote: Counting objects:  55% (92/166)[Kremote: Counting objects:  56% (93/166)[Kremote: Counting objects:  57% (95/166)[Kremote: Counting objects:  58% (97/166)[Kremote: Counting objects:  59% (98/166)[Kremote: Counting objects:  60% (100/166)[Kremote: Counting objects:  61% (102/166)[Kremote: Counting objects:  62% (103/166)[Kremote: Counting objects:  63% (105/166)[Kremote: Counting objects:  64% (107/166)[Kremote: Counting objects:  65% (108/166)[Kremote: Counting objects:  66% (110/166)[Kremote: Counting objects:  67% (112/166)[Kremote: Counting objects:  68% (113/166)[Kremote: Counting objects:  69% (115/166)[Kremote: Counting objects:  70% (117/166)[Kremote: Counting objects:  71% (118/166)[Kremote: Counting objects:  72% (120/166)[Kremote: Counting objects:  73% (122/166)[Kremote: Counting objects:  74% (123/166)[Kremote: Counting objects:  75% (125/166)[Kremote: Counting objects:  76% (127/166)[Kremote: Counting objects:  77% (128/166)[Kremote: Counting objects:  78% (130/166)[Kremote: Counting objects:  79% (132/166)[Kremote: Counting objects:  80% (133/166)[Kremote: Counting objects:  81% (135/166)[Kremote: Counting objects:  82% (137/166)[Kremote: Counting objects:  83% (138/166)[Kremote: Counting objects:  84% (140/166)[Kremote: Counting objects:  85% (142/166)[Kremote: Counting objects:  86% (143/166)[Kremote: Counting objects:  87% (145/166)[Kremote: Counting objects:  88% (147/166)[Kremote: Counting objects:  89% (148/166)[Kremote: Counting objects:  90% (150/166)[Kremote: Counting objects:  91% (152/166)[Kremote: Counting objects:  92% (153/166)[Kremote: Counting objects:  93% (155/166)[Kremote: Counting objects:  94% (157/166)[Kremote: Counting objects:  95% (158/166)[Kremote: Counting objects:  96% (160/166)[Kremote: Counting objects:  97% (162/166)[Kremote: Counting objects:  98% (163/166)[Kremote: Counting objects:  99% (165/166)[Kremote: Counting objects: 100% (166/166)[Kremote: Counting objects: 100% (166/166), done.[K
remote: Compressing objects:   1% (1/58)[Kremote: Compressing objects:   3% (2/58)[Kremote: Compressing objects:   5% (3/58)[Kremote: Compressing objects:   6% (4/58)[Kremote: Compressing objects:   8% (5/58)[Kremote: Compressing objects:  10% (6/58)[Kremote: Compressing objects:  12% (7/58)[Kremote: Compressing objects:  13% (8/58)[Kremote: Compressing objects:  15% (9/58)[Kremote: Compressing objects:  17% (10/58)[Kremote: Compressing objects:  18% (11/58)[Kremote: Compressing objects:  20% (12/58)[Kremote: Compressing objects:  22% (13/58)[Kremote: Compressing objects:  24% (14/58)[Kremote: Compressing objects:  25% (15/58)[Kremote: Compressing objects:  27% (16/58)[Kremote: Compressing objects:  29% (17/58)[Kremote: Compressing objects:  31% (18/58)[Kremote: Compressing objects:  32% (19/58)[Kremote: Compressing objects:  34% (20/58)[Kremote: Compressing objects:  36% (21/58)[Kremote: Compressing objects:  37% (22/58)[Kremote: Compressing objects:  39% (23/58)[Kremote: Compressing objects:  41% (24/58)[Kremote: Compressing objects:  43% (25/58)[Kremote: Compressing objects:  44% (26/58)[Kremote: Compressing objects:  46% (27/58)[Kremote: Compressing objects:  48% (28/58)[Kremote: Compressing objects:  50% (29/58)[Kremote: Compressing objects:  51% (30/58)[Kremote: Compressing objects:  53% (31/58)[Kremote: Compressing objects:  55% (32/58)[Kremote: Compressing objects:  56% (33/58)[Kremote: Compressing objects:  58% (34/58)[Kremote: Compressing objects:  60% (35/58)[Kremote: Compressing objects:  62% (36/58)[Kremote: Compressing objects:  63% (37/58)[Kremote: Compressing objects:  65% (38/58)[Kremote: Compressing objects:  67% (39/58)[Kremote: Compressing objects:  68% (40/58)[Kremote: Compressing objects:  70% (41/58)[Kremote: Compressing objects:  72% (42/58)[Kremote: Compressing objects:  74% (43/58)[Kremote: Compressing objects:  75% (44/58)[Kremote: Compressing objects:  77% (45/58)[Kremote: Compressing objects:  79% (46/58)[Kremote: Compressing objects:  81% (47/58)[Kremote: Compressing objects:  82% (48/58)[Kremote: Compressing objects:  84% (49/58)[Kremote: Compressing objects:  86% (50/58)[Kremote: Compressing objects:  87% (51/58)[Kremote: Compressing objects:  89% (52/58)[Kremote: Compressing objects:  91% (53/58)[Kremote: Compressing objects:  93% (54/58)[Kremote: Compressing objects:  94% (55/58)[Kremote: Compressing objects:  96% (56/58)[Kremote: Compressing objects:  98% (57/58)[Kremote: Compressing objects: 100% (58/58)[Kremote: Compressing objects: 100% (58/58), done.[K
remote: Total 173 (delta 112), reused 154 (delta 108), pack-reused 7[K
Receiving objects:   0% (1/173)   Receiving objects:   1% (2/173)   Receiving objects:   2% (4/173)   Receiving objects:   3% (6/173)   Receiving objects:   4% (7/173)   Receiving objects:   5% (9/173)   Receiving objects:   6% (11/173)   Receiving objects:   7% (13/173)   Receiving objects:   8% (14/173)   Receiving objects:   9% (16/173)   Receiving objects:  10% (18/173)   Receiving objects:  11% (20/173)   Receiving objects:  12% (21/173)   Receiving objects:  13% (23/173)   Receiving objects:  14% (25/173)   Receiving objects:  15% (26/173)   Receiving objects:  16% (28/173)   Receiving objects:  17% (30/173)   Receiving objects:  18% (32/173)   Receiving objects:  19% (33/173)   Receiving objects:  20% (35/173)   Receiving objects:  21% (37/173)   Receiving objects:  22% (39/173)   Receiving objects:  23% (40/173)   Receiving objects:  24% (42/173)   Receiving objects:  25% (44/173)   Receiving objects:  26% (45/173)   Receiving objects:  27% (47/173)   Receiving objects:  28% (49/173)   Receiving objects:  29% (51/173)   Receiving objects:  30% (52/173)   Receiving objects:  31% (54/173)   Receiving objects:  32% (56/173)   Receiving objects:  33% (58/173)   Receiving objects:  34% (59/173)   Receiving objects:  35% (61/173)   Receiving objects:  36% (63/173)   Receiving objects:  37% (65/173)   Receiving objects:  38% (66/173)   Receiving objects:  39% (68/173)   Receiving objects:  40% (70/173)   Receiving objects:  41% (71/173)   Receiving objects:  42% (73/173)   Receiving objects:  43% (75/173)   Receiving objects:  44% (77/173)   Receiving objects:  45% (78/173)   Receiving objects:  46% (80/173)   Receiving objects:  47% (82/173)   Receiving objects:  48% (84/173)   Receiving objects:  49% (85/173)   Receiving objects:  50% (87/173)   Receiving objects:  51% (89/173)   Receiving objects:  52% (90/173)   Receiving objects:  53% (92/173)   Receiving objects:  54% (94/173)   Receiving objects:  55% (96/173)   Receiving objects:  56% (97/173)   Receiving objects:  57% (99/173)   Receiving objects:  58% (101/173)   Receiving objects:  59% (103/173)   Receiving objects:  60% (104/173)   Receiving objects:  61% (106/173)   Receiving objects:  62% (108/173)   Receiving objects:  63% (109/173)   Receiving objects:  64% (111/173)   Receiving objects:  65% (113/173)   Receiving objects:  66% (115/173)   Receiving objects:  67% (116/173)   Receiving objects:  68% (118/173)   Receiving objects:  69% (120/173)   Receiving objects:  70% (122/173)   Receiving objects:  71% (123/173)   Receiving objects:  72% (125/173)   Receiving objects:  73% (127/173)   Receiving objects:  74% (129/173)   Receiving objects:  75% (130/173)   Receiving objects:  76% (132/173)   Receiving objects:  77% (134/173)   Receiving objects:  78% (135/173)   Receiving objects:  79% (137/173)   Receiving objects:  80% (139/173)   Receiving objects:  81% (141/173)   Receiving objects:  82% (142/173)   Receiving objects:  83% (144/173)   Receiving objects:  84% (146/173)   Receiving objects:  85% (148/173)   Receiving objects:  86% (149/173)   Receiving objects:  87% (151/173)   Receiving objects:  88% (153/173)   Receiving objects:  89% (154/173)   Receiving objects:  90% (156/173)   Receiving objects:  91% (158/173)   Receiving objects:  92% (160/173)   Receiving objects:  93% (161/173)   Receiving objects:  94% (163/173)   Receiving objects:  95% (165/173)   Receiving objects:  96% (167/173)   Receiving objects:  97% (168/173)   Receiving objects:  98% (170/173)   Receiving objects:  99% (172/173)   Receiving objects: 100% (173/173)   Receiving objects: 100% (173/173), 66.83 KiB | 0 bytes/s, done.
Resolving deltas:   0% (0/112)   Resolving deltas:   4% (5/112)   Resolving deltas:  12% (14/112)   Resolving deltas:  17% (20/112)   Resolving deltas:  20% (23/112)   Resolving deltas:  21% (24/112)   Resolving deltas:  24% (27/112)   Resolving deltas:  25% (28/112)   Resolving deltas:  26% (30/112)   Resolving deltas:  27% (31/112)   Resolving deltas:  28% (32/112)   Resolving deltas:  29% (33/112)   Resolving deltas:  45% (51/112)   Resolving deltas:  47% (53/112)   Resolving deltas:  48% (54/112)   Resolving deltas:  49% (55/112)   Resolving deltas:  50% (56/112)   Resolving deltas:  60% (68/112)   Resolving deltas:  69% (78/112)   Resolving deltas:  71% (80/112)   Resolving deltas:  72% (81/112)   Resolving deltas:  73% (82/112)   Resolving deltas:  74% (83/112)   Resolving deltas:  75% (84/112)   Resolving deltas:  82% (92/112)   Resolving deltas:  85% (96/112)   Resolving deltas:  87% (98/112)   Resolving deltas:  89% (100/112)   Resolving deltas:  91% (102/112)   Resolving deltas:  95% (107/112)   Resolving deltas:  96% (108/112)   Resolving deltas:  97% (109/112)   Resolving deltas:  98% (110/112)   Resolving deltas: 100% (112/112)   Resolving deltas: 100% (112/112), completed with 22 local objects.
From gitlab.funplus.io:cheesecake/cc-server
   026f6a6..362fe18  feature/spin_max_bonus -> origin/feature/spin_max_bonus
 + 1d659df...af0a7d8 feature/activityCEntry -> origin/feature/activityCEntry  (forced update)
   1e2975f..f9e4d4a  feature/analyze_svr_err -> origin/feature/analyze_svr_err
 + 8741b96...214e3ca feature/poker -> origin/feature/poker  (forced update)
 + 5c78d28...d73b2f5 feature/spinMaxUpgrade -> origin/feature/spinMaxUpgrade  (forced update)
 + 4409e51...b24a50c feature/wheel -> origin/feature/wheel  (forced update)
Updating 026f6a6..362fe18
Fast-forward
 server/service/activity/preproccessing.go | 2 [32m+[m[31m-[m
 1 file changed, 1 insertion(+), 1 deletion(-)
disable_rtp_limit
disable_rtp_limit
[0;35m              ARCH:[0m linux
[0;35m          LOCAL_IP:[0m 10.0.84.16
[0;35m               APP:[0m pkcp
[0;32m           APP_DIR:[0m /home/user00/cc/cc-slots-land/stage/app=pkcp/app
[0;32m       Fluentd-DIR:[0m /mnt/slots/cc-slots-land/batch/pkcp/fluentd
[0;32m         Mongo-DIR:[0m /mnt/slots/cc-slots-land/batch/pkcp/mongo
[0;32m         Redis-DIR:[0m /mnt/slots/cc-slots-land/batch/pkcp/redis
[0;32m       PM_CONF_DIR:[0m /home/user00/cc/cc-conf/gen/rawdata/server
[0;35m  BACKEND_CODE_DIR:[0m /home/user00/cc/cc-server
[0;35m  BACKEND_CONF_DIR:[0m /home/user00/cc/cc-conf
[1;33m   BANDIT_CODE_DIR:[0m /home/user00/cc/bandit-server
[1;33m   BANDIT_CONF_DIR:[0m /home/user00/cc/bandit-conf
[0;35m   BACKEND_PM_PATH:[0m /pkcp_dev_backend
[1;33m    BANDIT_PM_PATH:[0m /pkcp_dev_bandit
[0;35m           Network:[0m pkcp
[0;35m    ETCD_ENDPOINTS:[0m 10.0.84.16:2379
[0;35m         REDIS_URI:[0m pkcp-redis:6379
[0;35m Backend-Container:[0m pkcp-backend
[1;33m  BANDIT-Container:[0m pkcp-rpc
[0;32m Fluentd-Container:[0m pkcp-fluentd
[0;32m   Mongo-Container:[0m pkcp-mongo
[0;32m   Redis-Container:[0m pkcp-redis
[1;33m    BUILD TARGET:[0m game
[1;33m   BUILD COMMAND:[0m cd proto && make server -B && cd .. && server/output/build-server.sh docker
[1;33m           IMAGE:[0m slots/backend-builder:latest
[1;33m       CONTAINER:[0m backend-builder
[1;33m          GO_DIR:[0m /home/user00/cc/cc-slots-land/go
[1;33m        CODE_DIR:[0m /home/user00/cc/cc-server
[1;33m        CONF_DIR:[0m /home/user00/cc/cc-conf
[1;33m       BUILD_DIR:[0m /slots
[1;33m  BUILD_CONF_DIR:[0m /cc-conf
[1;33m     CONFIG_FILE:[0m pkcp/config.ini
[1;33mCONFIG_FILE_PROD:[0m pkcp/config.ini
[0;32mMOUNT_CONF_LOADER => /home/user00/cc/cc-conf/gen/golang/conf:/slots/server/pkg/gen/golang/conf[0m
[0;32m MOUNT_CONF_MODEL => /home/user00/cc/cc-conf/gen/golang/rawdata:/cc-conf/gen/golang/rawdata[0m
[0;36mdocker run -it   --name "backend-builder"   --hostname "backend-builder"   -v "/home/user00/cc/cc-slots-land/go":/go   -v "/home/user00/cc/cc-server":"/slots"   -v "/home/user00/cc/cc-conf":"/cc-conf"   -v "/home/user00/cc/cc-conf/gen/golang/conf:/slots/server/pkg/gen/golang/conf"   -v "/home/user00/cc/cc-conf/gen/golang/rawdata:/cc-conf/gen/golang/rawdata"    "slots/backend-builder:latest"   sh -c "cd proto && make server -B && cd .. && server/output/build-server.sh docker"[0m
rm ../server/pb/*.pb.go 2>/dev/null || :
protoc --go_out=../server/pb *.proto
[0;32mbuilding "plutus-server"[0m
[0;33mLDFLAGS[0m = [0;36m-X 'plutus/core.BuildGoVersion=go1.17.12 linux/amd64' -X 'plutus/core.BuildTime=2023-03-27T18:49:56+0800' -X 'plutus/core.BuildType=docker' -X 'plutus/core.BuildHost=backend-builder' -X 'plutus/core.BuildGit=feature/spin_max_bonus:362fe183f-dirty' -X 'plutus/core.BuildConf=v0.0.74-0.20230327083126-07e5e104427e'[0m
[0;33mTARGET[0m = [0;36m/slots/server/cmd/main/plutus-server-next[0m
[0;32mreset app dir: /home/user00/cc/cc-slots-land/stage/app=pkcp/app[0m
[0;32mcopy compiled binary to app dir...[0m
[0;32mcopy server config: pkcp/config.ini /home/user00/cc/cc-slots-land/stage/app=pkcp/app/config.ini[0m
[0;32mremove container: backend-builder[0m
[0;36mreclaim resources: backend-builder 819c0388144a[0m
819c0388144a
819c0388144a
[0;32m/home/user00/cc/cc-slots-land/stage[0m
Sending build context to Docker daemon  557.1kBSending build context to Docker daemon  5.014MBSending build context to Docker daemon  10.58MBSending build context to Docker daemon  15.04MBSending build context to Docker daemon  22.28MBSending build context to Docker daemon  30.64MBSending build context to Docker daemon  37.88MBSending build context to Docker daemon  45.68MBSending build context to Docker daemon  52.92MBSending build context to Docker daemon  60.16MBSending build context to Docker daemon  68.52MBSending build context to Docker daemon  76.87MBSending build context to Docker daemon  84.67MBSending build context to Docker daemon  93.03MBSending build context to Docker daemon  101.4MBSending build context to Docker daemon  110.3MBSending build context to Docker daemon  118.7MBSending build context to Docker daemon  127.6MBSending build context to Docker daemon  134.8MBSending build context to Docker daemon  142.6MBSending build context to Docker daemon  149.8MBSending build context to Docker daemon  157.1MBSending build context to Docker daemon    161MBSending build context to Docker daemon  167.7MBSending build context to Docker daemon  175.5MBSending build context to Docker daemon  183.8MBSending build context to Docker daemon  191.6MBSending build context to Docker daemon  199.4MBSending build context to Docker daemon  207.8MBSending build context to Docker daemon  216.1MBSending build context to Docker daemon  224.5MBSending build context to Docker daemon  231.7MBSending build context to Docker daemon  239.5MBSending build context to Docker daemon  246.8MBSending build context to Docker daemon  255.1MBSending build context to Docker daemon  263.5MBSending build context to Docker daemon  271.3MBSending build context to Docker daemon  279.1MBSending build context to Docker daemon  285.8MBSending build context to Docker daemon  293.6MBSending build context to Docker daemon  301.4MBSending build context to Docker daemon  306.6MB
Step 1/5 : FROM alpine:3.12.0
 ---> a24bb4013296
Step 2/5 : ARG app
 ---> Using cache
 ---> 00422b32391e
Step 3/5 : ADD $app/app/ /slots
 ---> 36e85faf0b0f
Step 4/5 : WORKDIR /slots
 ---> Running in 617210e0702b
Removing intermediate container 617210e0702b
 ---> f981eba59fcd
Step 5/5 : ENTRYPOINT ["/slots/plutus-server"]
 ---> Running in 37d588f9c148
Removing intermediate container 37d588f9c148
 ---> 19beff373f88
Successfully built 19beff373f88
Successfully tagged plutus:pkcp
[0;32mgc: app=pkcp/app/backend[0m
/mnt/slots/cc-slots-land/batch
[0;35m              ARCH:[0m linux
[0;35m          LOCAL_IP:[0m 10.0.84.16
[0;35m               APP:[0m pkcp
[0;32m           APP_DIR:[0m /home/user00/cc/cc-slots-land/stage/app=pkcp/app
[0;32m       Fluentd-DIR:[0m /mnt/slots/cc-slots-land/batch/pkcp/fluentd
[0;32m         Mongo-DIR:[0m /mnt/slots/cc-slots-land/batch/pkcp/mongo
[0;32m         Redis-DIR:[0m /mnt/slots/cc-slots-land/batch/pkcp/redis
[0;32m       PM_CONF_DIR:[0m /home/user00/cc/cc-conf/gen/rawdata/server
[0;35m  BACKEND_CODE_DIR:[0m /home/user00/cc/cc-server
[0;35m  BACKEND_CONF_DIR:[0m /home/user00/cc/cc-conf
[1;33m   BANDIT_CODE_DIR:[0m /home/user00/cc/bandit-server
[1;33m   BANDIT_CONF_DIR:[0m /home/user00/cc/bandit-conf
[0;35m   BACKEND_PM_PATH:[0m /pkcp_dev_backend
[1;33m    BANDIT_PM_PATH:[0m /pkcp_dev_bandit
[0;35m           Network:[0m pkcp
[0;35m    ETCD_ENDPOINTS:[0m 10.0.84.16:2379
[0;35m         REDIS_URI:[0m pkcp-redis:6379
[0;35m Backend-Container:[0m pkcp-backend
[1;33m  BANDIT-Container:[0m pkcp-rpc
[0;32m Fluentd-Container:[0m pkcp-fluentd
[0;32m   Mongo-Container:[0m pkcp-mongo
[0;32m   Redis-Container:[0m pkcp-redis

[0;32mstart pkcp-backend[0m
[0;36m  docker run -d     -e app=pkcp.dev     -e etcd_endpoints=10.0.84.16:2379     -e sys_env_name=pkcp     -e sys_stage=dev_backend     -e hostname=10.0.84.16     -e port=9999 	--env-file .env     -p 9999:9000 -p 10099:9168     --network pkcp     --name pkcp-backend     plutus:pkcp[0m
[0;36mreclaim resources: pkcp-backend 59be4e838275[0m
59be4e838275
59be4e838275
1a3a2c720eaf813b828bd100b96aa327608fc057dd5b7ee8205b56bd912da128
[0;32mwaiting for pkcp-backend...[0m
[0;32m=====> try 0 times[0m
curl: (56) Recv failure: Connection reset by peer
[0;32m=====> try 1 times[0m
400 Bad Request2023-03-27 10:52:25.659932 I | maxprocs: Leaving GOMAXPROCS=8: CPU quota undefined
{"log_level":"warn","date":"2023-03-27T10:52:25.660Z","dd_meta_channel":"server","tags":["logbus"],"log_xid":"cggnaqc2845bb9uj9olg","server_id":"cggnaqc2845bb9uj9ojg","server_ip":"172.21.0.6","server_birth":1679914345,"host_name":"1a3a2c720eaf","glog-msg":"[sandwich] [deprecated] should use WithAdapter to initialize pmconf package."}
{"log_level":"warn","date":"2023-03-27T10:52:25.677Z","dd_meta_channel":"server","tags":["logbus"],"log_xid":"cggnaqc2845bb9uj9om0","server_id":"cggnaqc2845bb9uj9ojg","server_ip":"172.21.0.6","server_birth":1679914345,"host_name":"1a3a2c720eaf","glog-msg":"[sandwich] [deprecated] PmConfPath changed due to sys_env_name and sys_stage, should use sandwich_conf_env","sysConfEnvStaging":"pkcp_dev_backend","pm_conf_path":"/pkcp_dev_backend"}
{
	"logger": {
		"timelocation": {},
		"host": "pkcp-fluentd",
		"type": "logbus",
		"serverbirth": "2023-03-27T06:52:26-04:00",
		"port": 24224,
		"withcaller": false
	},
	"timelocation": {},
	"gmt": {
		"listen": "0.0.0.0:9000",
		"secret": "xkcs;wjngSDGJL;KADlkafas"
	},
	"httplistenaddr": "0.0.0.0:9000",
	"serverbirth": "2023-03-27T06:52:26-04:00",
	"serveropen": "2021-01-01T00:00:00Z",
	"lighthouse": {
		"token": "c3p0zmycr83g00066h6g"
	},
	"app": "pkcp.dev",
	"funplus": {
		"url": "https://passport-sandbox-checksession.centurygame.com/server_api.php",
		"paysecret": "o+gt#+v)@-0\u002609my@e0@1c9v\u0026629i02t(kd9ry_sw\u0026j*oi*l4)",
		"serverpayid": "not-support",
		"expire": 3600
	},
	"bi": {
		"host": "",
		"mark": "178_pkcp",
		"port": 24224
	},
	"sisyphus": {
		"listen": "0.0.0.0:9000",
		"collection": "idGen",
		"timeout": 10000000000,
		"section": 0
	},
	"postoffice": {
		"listen": "0.0.0.0:9000",
		"serviceurl": "http://pkcp-postOffice:9000",
		"router": "/push",
		"reqpushurl": "",
		"appkey": "ca176bf86c3300375acebc07ff6684b0",
		"interval": 10,
		"timeout": 30000000000,
		"appid": 20106,
		"workercount": 20
	},
	"redis": {
		"uri": "pkcp-redis:6379",
		"pwd": "",
		"db": 0,
		"timeout": 5000000000,
		"usecluster": false
	},
	"rtm": {
		"servergateurl": "",
		"secretkey": "",
		"connecttimeout": 0,
		"questtimeout": 0,
		"adminuid": 0,
		"projectid": 0,
		"autoreconnect": false,
		"enable": false
	},
	"mongo": {
		"uri": "mongodb://root:passwd@pkcp-mongo:27017/?authSource=admin",
		"db": "plutus",
		"connecttimeout": 2000000000,
		"questtimeout": 10000000000,
		"deferduration": 60000000000,
		"lifetime": 3600000000000
	},
	"inbox": {
		"timeout": 10000000000
	},
	"dev": {
		"mode": true,
		"usegops": false,
		"richnewplayer": false
	},
	"gateway": {
		"useentitycache": false
	},
	"canonical": false
}
2023-03-27T10:52:27.207Z	[34minfo[0m	buslogger/logger.go:121	server	{"tags": ["logbus"], "log_xid": "cggnaqs2845bb9uj9omg", "server_ip": "172.21.0.6", "host_name": "1a3a2c720eaf", "server_id": "cf809f1c-b646-46b9-b718-af258191a99d", "server_birth": 1679914346, "role": "bootstrap", "msg": "TimeFake: add: 21853559, now: 2023-12-05 04:18:26.207544079 -0500 EST"}
2023-03-27T10:52:27.275Z	[34minfo[0m	sandwich@v1.2.85/endpoint.go:269	server	{"tags": ["logbus"], "log_xid": "cggnaqs2845bb9uj9oo0", "server_ip": "172.21.0.6", "host_name": "1a3a2c720eaf", "server_id": "cf809f1c-b646-46b9-b718-af258191a99d", "server_birth": 1679914346, "glog-msg": "[sandwich] sandwich endpoint update summary", "registry_path": "/pkcp.dev/sandwich/service/slot/", "entries": ["cggmdsc28452jojvsgk0_172.21.0.5:8087"], "added": ["cggmdsc28452jojvsgk0_172.21.0.5:8087"], "keys_removed": [], "keys_now": ["cggmdsc28452jojvsgk0"], "keys_old": []}
2023-03-27T10:52:34.032Z	[34minfo[0m	buslogger/logger.go:101	server	{"tags": ["logbus"], "log_xid": "cggnask2845bb9uj9op0", "server_ip": "172.21.0.6", "host_name": "1a3a2c720eaf", "server_id": "cf809f1c-b646-46b9-b718-af258191a99d", "server_birth": 1679914346, "role": "server", "msg": "game server start..."}
2023-03-27T10:52:34.275Z	[35mdebug[0m	ark@v1.2.2/ark.go:394	server	{"tags": ["logbus"], "log_xid": "cggnask2845bb9uj9oq0", "server_ip": "172.21.0.6", "host_name": "1a3a2c720eaf", "server_id": "cf809f1c-b646-46b9-b718-af258191a99d", "server_birth": 1679914346, "glog-msg": "[ark]Listening and serving HTTP on listener 0.0.0.0:9000"}

[0;32mpkcp-backend ready[0m
[1;33mversion:[0m [0;32m{"Git":"feature/spin_max_bonus:362fe183f-dirty","BuildTime":"2023-03-27T18:49:56+0800","BuildHost":"backend-builder","Type":"docker","Go":"go1.17.12 linux/amd64","Conf":"v0.0.74-0.20230327083126-07e5e104427e","Branch":""}[0m
CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS         PORTS                                             NAMES
1a3a2c720eaf   plutus:pkcp   "/slots/plutus-server"   10 seconds ago   Up 8 seconds   0.0.0.0:9999->9000/tcp, 0.0.0.0:10099->9168/tcp   pkcp-backend
é‡Šæ”¾è„šæœ¬é”

[SSH] completed
[SSH] exit-status: 0

[SSH] executing post build script:
server_name="pkcp"

source /root/jenkins/jk_func.sh
sleep 5
check_whole_server $server_name
pkcp-backend Check
pkcp-rpc Check
pkcp-redis Check
pkcp-mongo Check
pkcp-fluentd Check

[SSH] completed
[SSH] exit-status: 0

Finished: SUCCESS
