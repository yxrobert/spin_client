Started by user [8mha:////4NL15lwhNok46o8LpNIYOqAIaurwr6Vm2yW5YSW4R5+wAAAAlh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyWEgYu/dLi1CL9ovz8EgDKVWzSvwAAAA==[0mroot
Running as SYSTEM
[EnvInject] - Loading node environment variables.
Building in workspace /var/jenkins_home/workspace/åˆ†æ”¯ - æ›´æ”¹æœåŠ¡å™¨åˆ†æ”¯é…ç½®
[8mha:////4DhrNQ0X1UXbL+MfN48PGWeLTB/e7d6LgmXI1eCQTZtjAAAAqx+LCAAAAAAAAP9b85aBtbiIQSujNKU4P0+vIKc0PTOvWC8xrzgzOT8nv0gvMbkkEyjhCKb88ktSdwVsu2efuqidiYHRh4EDIu2ZUsIg5JOVWJaon5OYl64fXFKUmZduXVHEIAU1ODk/rzg/J1XPGUKDDGKAAEYmBoaKghIGlSQzi8QUc1NL3SRjM1NdE0sTY90kSxMzXVMjA0vT5CTjZDOzFADvVrfGrwAAAA==[0m[SSH] executing pre build script:
GAME_BR="feature/tastyPiggy"
GAME_CONF="deploy-cc-conf"
server_name="pk7009"
BANDIT_BR="develop"
BANDIT_CONF="deploy-bandit-conf"

#!/bin/bash

source /root/jenkins/jk_func.sh

if [ -z "$server_name" ]; then
    echo "Error: æ²¡æœ‰é€‰æ‹©æœåŠ¡å™¨!"
    exit 1
fi

file_lock
LINE_NO=$(grep -n "${server_name}:" $conf_file | awk -F ":" '{print $1}')
echo $LINE_NO
mod_branch $LINE_NO $GAME_BR $BANDIT_BR $GAME_CONF $BANDIT_CONF
file_unlock
è„šæœ¬å¯æ‰§è¡Œ
127

before setting
pk7009:
 port: 7009
 game: bugfix/lobbyPromotin
 bandit: develop
 cc-conf: deploy-cc-conf
 bandit-conf: deploy-bandit-conf
é‡Šæ”¾è„šæœ¬é”

[SSH] completed
[SSH] exit-status: 0

[SSH] executing post build script:
GAME_BR="feature/tastyPiggy"
GAME_CONF="deploy-cc-conf"
server_name="pk7009"
BANDIT_BR="develop"
BUILD_URL="http://10.0.84.16:8083/job/%E5%88%86%E6%94%AF%20-%20%E6%9B%B4%E6%94%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%86%E6%94%AF%E9%85%8D%E7%BD%AE/468/"
BANDIT_CONF="deploy-bandit-conf"

conf_file=~/jenkins/server_config.yaml
cat $conf_file | grep $server_name -C 6

cd /mnt/slots/bandit-server && git remote update
cd /mnt/slots/cc-server && git remote update
cd /var/lib/docker/volumes/jenkins-data/_data && python update_server_list.py

curl 'https://oapi.dingtalk.com/robot/send?access_token=13aa551ba8a79265c4424316089cd31c4f479b0f685f3d5a503b0ab6a1a42ec7' -H 'Content-Type: application/json'  -d '{"msgtype": "text","text": {"content": "Jenkins-Server['"${server_name}"'] Change To Game['"${GAME_BR}"'] RPC['"${BANDIT_BR}"'] GAME_CONF['"${GAME_CONF}"'] BANDIT_CONF['"${BANDIT_CONF}"'] "}}'

source /root/jenkins/jk_func.sh
~/jenkins/analyze_log/analyze_err -url ${BUILD_URL}
 bandit: feature/goldenPharaoh
 cc-conf: deploy-cc-conf
 bandit-conf: deploy-bandit-conf
 rpc_port: 7018
 desc: pk7008 

pk7009:
 port: 7009
 game: feature/tastyPiggy
 bandit: develop
 cc-conf: deploy-cc-conf
 bandit-conf: deploy-bandit-conf
 rpc_port: 7019
 desc: pk7009 

pk7010:
 port: 7100
 game: feature/luckyCard
 bandit: develop
 cc-conf: deploy-cc-conf
Fetching origin
remote: Enumerating objects: 62, done.[K
remote: Counting objects:   1% (1/62)[Kremote: Counting objects:   3% (2/62)[Kremote: Counting objects:   4% (3/62)[Kremote: Counting objects:   6% (4/62)[Kremote: Counting objects:   8% (5/62)[Kremote: Counting objects:   9% (6/62)[Kremote: Counting objects:  11% (7/62)[Kremote: Counting objects:  12% (8/62)[Kremote: Counting objects:  14% (9/62)[Kremote: Counting objects:  16% (10/62)[Kremote: Counting objects:  17% (11/62)[Kremote: Counting objects:  19% (12/62)[Kremote: Counting objects:  20% (13/62)[Kremote: Counting objects:  22% (14/62)[Kremote: Counting objects:  24% (15/62)[Kremote: Counting objects:  25% (16/62)[Kremote: Counting objects:  27% (17/62)[Kremote: Counting objects:  29% (18/62)[Kremote: Counting objects:  30% (19/62)[Kremote: Counting objects:  32% (20/62)[Kremote: Counting objects:  33% (21/62)[Kremote: Counting objects:  35% (22/62)[Kremote: Counting objects:  37% (23/62)[Kremote: Counting objects:  38% (24/62)[Kremote: Counting objects:  40% (25/62)[Kremote: Counting objects:  41% (26/62)[Kremote: Counting objects:  43% (27/62)[Kremote: Counting objects:  45% (28/62)[Kremote: Counting objects:  46% (29/62)[Kremote: Counting objects:  48% (30/62)[Kremote: Counting objects:  50% (31/62)[Kremote: Counting objects:  51% (32/62)[Kremote: Counting objects:  53% (33/62)[Kremote: Counting objects:  54% (34/62)[Kremote: Counting objects:  56% (35/62)[Kremote: Counting objects:  58% (36/62)[Kremote: Counting objects:  59% (37/62)[Kremote: Counting objects:  61% (38/62)[Kremote: Counting objects:  62% (39/62)[Kremote: Counting objects:  64% (40/62)[Kremote: Counting objects:  66% (41/62)[Kremote: Counting objects:  67% (42/62)[Kremote: Counting objects:  69% (43/62)[Kremote: Counting objects:  70% (44/62)[Kremote: Counting objects:  72% (45/62)[Kremote: Counting objects:  74% (46/62)[Kremote: Counting objects:  75% (47/62)[Kremote: Counting objects:  77% (48/62)[Kremote: Counting objects:  79% (49/62)[Kremote: Counting objects:  80% (50/62)[Kremote: Counting objects:  82% (51/62)[Kremote: Counting objects:  83% (52/62)[Kremote: Counting objects:  85% (53/62)[Kremote: Counting objects:  87% (54/62)[Kremote: Counting objects:  88% (55/62)[Kremote: Counting objects:  90% (56/62)[Kremote: Counting objects:  91% (57/62)[Kremote: Counting objects:  93% (58/62)[Kremote: Counting objects:  95% (59/62)[Kremote: Counting objects:  96% (60/62)[Kremote: Counting objects:  98% (61/62)[Kremote: Counting objects: 100% (62/62)[Kremote: Counting objects: 100% (62/62), done.[K
remote: Compressing objects:   1% (1/61)[Kremote: Compressing objects:   3% (2/61)[Kremote: Compressing objects:   4% (3/61)[Kremote: Compressing objects:   6% (4/61)[Kremote: Compressing objects:   8% (5/61)[Kremote: Compressing objects:   9% (6/61)[Kremote: Compressing objects:  11% (7/61)[Kremote: Compressing objects:  13% (8/61)[Kremote: Compressing objects:  14% (9/61)[Kremote: Compressing objects:  16% (10/61)[Kremote: Compressing objects:  18% (11/61)[Kremote: Compressing objects:  19% (12/61)[Kremote: Compressing objects:  21% (13/61)[Kremote: Compressing objects:  22% (14/61)[Kremote: Compressing objects:  24% (15/61)[Kremote: Compressing objects:  26% (16/61)[Kremote: Compressing objects:  27% (17/61)[Kremote: Compressing objects:  29% (18/61)[Kremote: Compressing objects:  31% (19/61)[Kremote: Compressing objects:  32% (20/61)[Kremote: Compressing objects:  34% (21/61)[Kremote: Compressing objects:  36% (22/61)[Kremote: Compressing objects:  37% (23/61)[Kremote: Compressing objects:  39% (24/61)[Kremote: Compressing objects:  40% (25/61)[Kremote: Compressing objects:  42% (26/61)[Kremote: Compressing objects:  44% (27/61)[Kremote: Compressing objects:  45% (28/61)[Kremote: Compressing objects:  47% (29/61)[Kremote: Compressing objects:  49% (30/61)[Kremote: Compressing objects:  50% (31/61)[Kremote: Compressing objects:  52% (32/61)[Kremote: Compressing objects:  54% (33/61)[Kremote: Compressing objects:  55% (34/61)[Kremote: Compressing objects:  57% (35/61)[Kremote: Compressing objects:  59% (36/61)[Kremote: Compressing objects:  60% (37/61)[Kremote: Compressing objects:  62% (38/61)[Kremote: Compressing objects:  63% (39/61)[Kremote: Compressing objects:  65% (40/61)[Kremote: Compressing objects:  67% (41/61)[Kremote: Compressing objects:  68% (42/61)[Kremote: Compressing objects:  70% (43/61)[Kremote: Compressing objects:  72% (44/61)[Kremote: Compressing objects:  73% (45/61)[Kremote: Compressing objects:  75% (46/61)[Kremote: Compressing objects:  77% (47/61)[Kremote: Compressing objects:  78% (48/61)[Kremote: Compressing objects:  80% (49/61)[Kremote: Compressing objects:  81% (50/61)[Kremote: Compressing objects:  83% (51/61)[Kremote: Compressing objects:  85% (52/61)[Kremote: Compressing objects:  86% (53/61)[Kremote: Compressing objects:  88% (54/61)[Kremote: Compressing objects:  90% (55/61)[Kremote: Compressing objects:  91% (56/61)[Kremote: Compressing objects:  93% (57/61)[Kremote: Compressing objects:  95% (58/61)[Kremote: Compressing objects:  96% (59/61)[Kremote: Compressing objects:  98% (60/61)[Kremote: Compressing objects: 100% (61/61)[Kremote: Compressing objects: 100% (61/61), done.[K
remote: Total 62 (delta 33), reused 9 (delta 0), pack-reused 0[K
Unpacking objects:   1% (1/62)   Unpacking objects:   3% (2/62)   Unpacking objects:   4% (3/62)   Unpacking objects:   6% (4/62)   Unpacking objects:   8% (5/62)   Unpacking objects:   9% (6/62)   Unpacking objects:  11% (7/62)   Unpacking objects:  12% (8/62)   Unpacking objects:  14% (9/62)   Unpacking objects:  16% (10/62)   Unpacking objects:  17% (11/62)   Unpacking objects:  19% (12/62)   Unpacking objects:  20% (13/62)   Unpacking objects:  22% (14/62)   Unpacking objects:  24% (15/62)   Unpacking objects:  25% (16/62)   Unpacking objects:  27% (17/62)   Unpacking objects:  29% (18/62)   Unpacking objects:  30% (19/62)   Unpacking objects:  32% (20/62)   Unpacking objects:  33% (21/62)   Unpacking objects:  35% (22/62)   Unpacking objects:  37% (23/62)   Unpacking objects:  38% (24/62)   Unpacking objects:  40% (25/62)   Unpacking objects:  41% (26/62)   Unpacking objects:  43% (27/62)   Unpacking objects:  45% (28/62)   Unpacking objects:  46% (29/62)   Unpacking objects:  48% (30/62)   Unpacking objects:  50% (31/62)   Unpacking objects:  51% (32/62)   Unpacking objects:  53% (33/62)   Unpacking objects:  54% (34/62)   Unpacking objects:  56% (35/62)   Unpacking objects:  58% (36/62)   Unpacking objects:  59% (37/62)   Unpacking objects:  61% (38/62)   Unpacking objects:  62% (39/62)   Unpacking objects:  64% (40/62)   Unpacking objects:  66% (41/62)   Unpacking objects:  67% (42/62)   Unpacking objects:  69% (43/62)   Unpacking objects:  70% (44/62)   Unpacking objects:  72% (45/62)   Unpacking objects:  74% (46/62)   Unpacking objects:  75% (47/62)   Unpacking objects:  77% (48/62)   Unpacking objects:  79% (49/62)   Unpacking objects:  80% (50/62)   Unpacking objects:  82% (51/62)   Unpacking objects:  83% (52/62)   Unpacking objects:  85% (53/62)   Unpacking objects:  87% (54/62)   Unpacking objects:  88% (55/62)   Unpacking objects:  90% (56/62)   Unpacking objects:  91% (57/62)   Unpacking objects:  93% (58/62)   Unpacking objects:  95% (59/62)   Unpacking objects:  96% (60/62)   Unpacking objects:  98% (61/62)   Unpacking objects: 100% (62/62)   Unpacking objects: 100% (62/62), done.
From gitlab.funplus.io:fruities/bandit-server
   00906c4..e949217  develop    -> origin/develop
Fetching origin
SL=pkzxj,pkyq,pktest,pkreview,pkjy,pkcp,pk7020,pk7019,pk7018,pk7017,pk7016,pk7015,pk7014,pk7013,pk7012,pk7011,pk7010,pk7009,pk7008,pk7007,pk7006,pk7005,pk7004,pk7003,pk7002,pk7001
SLDesc=[ pkzxj ] game:[ develop ] bandit:[ develop ] port:[ 8888 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pkyq ] game:[ pre/v0.12.2 ] bandit:[ pre/v0.12.2 ] port:[ 3333 ] cc-conf[ pre/v0.12.2 ] bd-conf[ pre/v0.12.2 ],[ pktest ] game:[ develop ] bandit:[ develop ] port:[ 6666 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pkreview ] game:[ pre/v0.13.7 ] bandit:[ pre/v0.13.7 ] port:[ 4444 ] cc-conf[ pre/v0.13.7 ] bd-conf[ pre/v0.13.7 ],[ pkjy ] game:[ feature/disco-sp1 ] bandit:[ feature/disco-personal ] port:[ 5555 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pkcp ] game:[ feature/spin_max_bonus ] bandit:[ develop ] port:[ 9999 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7020 ] game:[ develop ] bandit:[ develop ] port:[ 7210 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7019 ] game:[ feature/new_quest ] bandit:[ develop ] port:[ 7209 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7018 ] game:[ feature/card_end_pr1 ] bandit:[ develop ] port:[ 7208 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7017 ] game:[ feature/journey_booster_pr6 ] bandit:[ develop ] port:[ 7207 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7016 ] game:[ develop ] bandit:[ develop ] port:[ 7206 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7015 ] game:[ develop ] bandit:[ develop ] port:[ 7205 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7014 ] game:[ feature/piggyPinata ] bandit:[ feature/piggyPinata ] port:[ 7204 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ qunlong/pk7013 ] game:[ pre/v0.13.7 ] bandit:[ pre/v0.13.7 ] port:[ 7203 ] cc-conf[ pre/v0.13.7 ] bd-conf[ pre/v0.13.7 ],[ tanghao/pk7012 ] game:[ pre/v0.13.7 ] bandit:[ pre/v0.13.7 ] port:[ 7202 ] cc-conf[ pre/v0.13.7 ] bd-conf[ pre/v0.13.7 ],[ yanqiao/pk7011 ] game:[ pre/v0.13.7 ] bandit:[ pre/v0.13.7 ] port:[ 7201 ] cc-conf[ pre/v0.13.7 ] bd-conf[ pre/v0.13.7 ],[ pk7010 ] game:[ feature/luckyCard ] bandit:[ develop ] port:[ 7100 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7009 ] game:[ feature/tastyPiggy ] bandit:[ develop ] port:[ 7009 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7008 ] game:[ feature/goldenPharaoh_animation ] bandit:[ feature/goldenPharaoh ] port:[ 7008 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7007 ] game:[ feature/luckyCard ] bandit:[ develop ] port:[ 7007 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7006 ] game:[ develop ] bandit:[ develop ] port:[ 7006 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7005 ] game:[ feature/disco-personal ] bandit:[ feature/disco-personal ] port:[ 7005 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7004 ] game:[ feature/siberianWolf ] bandit:[ feature/siberianWolf ] port:[ 7004 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ cehua/pk7003 ] game:[ develop ] bandit:[ develop ] port:[ 7003 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7002 ] game:[ feature/endless2 ] bandit:[ develop ] port:[ 7002 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ],[ pk7001 ] game:[ develop ] bandit:[ bugfix/lavaCash_polish ] port:[ 7001 ] cc-conf[ deploy-cc-conf ] bd-conf[ deploy-bandit-conf ]
{"errcode":0,"errmsg":"ok"}
[SSH] completed
[SSH] exit-status: 0

Finished: SUCCESS
